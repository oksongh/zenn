---
title: "ビジネスロジックを表現する関数は宣言的な命名をすべき"
emoji: "📌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [SRP]
published: false
---

# 関数名について考えていること

関数の命名のとき考えていることをすこし言語化できたので記録。
単一責任原則とはいうが、責任として関数が負うべき範囲はどのように設定すべきなのか？ブラックボックス化(関数名から目的はわかるが、具体的に何をやってるかはわからない)にも色々あるのでは？という問いについて考えた。

## ビジネスロジックを表現する関数
メール送信の対象者を抽出する関数を例にする。
```java
public static List<User> extractMailTarget(List<User> users) {
    ...
}
```

誰が抽出されるか、ビジネスの専門家なら分かるかもしれないが、普通の人は分からない。
また、仕様変更で誰を抽出したいかガラッと変わるかもしれない。
それでも"メール送信の対象者を抽出する"という役割は変わらない、役割にだけ関心がある。
つまり、ビジネスロジックを表現する関数は宣言的な関数。

### 呼び出し側の思考例
メール送信の対象者を抽出するようだ。具体的にどういう条件で抽出するのかはドキュメントを読まないとわからないが、とにかくメール送信の対象者を取得するならこの関数をつかえばいいな。

## 標準ライブラリ的な関数
("標準ライブラリ的な関数"という分類の仕方でいいのかは疑問が残る、より良い概念がありそう)

文字列が部分文字列を含むか判定する関数を例にする。
```java
public static boolean contains(String str,String searchStr){
    ...
}
```

処理の内容が名前になっているので関数が手続き的であるといえる。
処理内容は分かるが関数の目的は呼び出し側依存なので不明。
普通、仕様変更はないし、あるとしても軽微で前方互換がありそう。
もし仕様変更をやりたくなったら、別の関数を定義することを検討すべき。
名前=処理内容という関係が崩れてしまいかねない。

### 呼び出し側の思考例
`contains("abcde","abc") // ⇒ true`、`contains("abcde","xyz") // ⇒ false`的な感じだろう、nullや空文字列を引数にするときの挙動は見ておかないとな。

## 結論
関数名から分かることはこうあるべき。

|  |目的|処理内容             |
|--|----|-------             |
|ビジネスロジック|分かる|分からない|
|標準ライブラリ的な関数|分からない|分かる|

ビジネスロジックを表現する関数を書くときは宣言的な命名をすべき。自戒。

### 付録

標準ライブラリ的な関数は処理内容が分かる命名にすべき、ということは当然ながらビジネスロジックに依存してはならないということが分かる。

ビジネスロジック = (ビジネスロジック | 標準ライブラリ的な関数)+
標準ライブラリ的な関数 = 標準ライブラリ的な関数+ // ← ここにビジネスロジックが入ってはいけない
